{"version":3,"sources":["index.js"],"names":["player","duration","isPaused","window","innerWidth","innerHeight","width","height","onReady","invoke","bind","onError","onStateChange","onPlaybackRateChange","onPlaybackQualityChange","onPlaying","onDurationReady","_onStateChange","data","_setDuration","_setCurrentTime","createPlayer","opts","options","playerVars","enablejsapi","autoplay","rel","controls","playsinline","modestbranding","showinfo","on","playVideo","then","pauseVideo","seekTo","s","getDuration","setInterval","getCurrentTime","define"],"mappings":"iLAAA,qEACA,oF,yyBAEA,GAAIA,CAAAA,MAAJ,CACA,GAAIC,CAAAA,QAAQ,CAAG,CAAf,CACA,GAAIC,CAAAA,QAAQ,CAAG,KAAf,C,YACoCC,M,CAA5BC,U,SAAAA,U,CAAYC,W,SAAAA,W,CACpB,GAAIC,CAAAA,KAAK,CAAG,MAAZ,CACA,GAAIC,CAAAA,MAAM,CAAG,MAAb,CAOA,GAAMC,CAAAA,OAAO,CAAGC,iBAAOC,IAAP,CAAY,SAAZ,CAAhB,CACA,GAAMC,CAAAA,OAAO,CAAGF,iBAAOC,IAAP,CAAY,SAAZ,CAAhB,CACA,GAAME,CAAAA,aAAa,CAAGH,iBAAOC,IAAP,CAAY,eAAZ,CAAtB,CACA,GAAMG,CAAAA,oBAAoB,CAAGJ,iBAAOC,IAAP,CAAY,sBAAZ,CAA7B,CACA,GAAMI,CAAAA,uBAAuB,CAAGL,iBAAOC,IAAP,CAAY,yBAAZ,CAAhC,CACA,GAAMK,CAAAA,SAAS,CAAGN,iBAAOC,IAAP,CAAY,WAAZ,CAAlB,CACA,GAAMM,CAAAA,eAAe,CAAGP,iBAAOC,IAAP,CAAY,iBAAZ,CAAxB,CAEA,GAAMO,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAInC,GAAIA,IAAI,GAAK,CAAT,EAAcjB,QAAQ,GAAK,CAA/B,CAAkC,CAChCkB,YAAY,GACZC,eAAe,GAChB,CAED,GAAIF,IAAI,GAAK,CAAb,CAAgBhB,QAAQ,CAAG,IAAX,CAAhB,IACKA,CAAAA,QAAQ,CAAG,KAAX,CAELU,aAAa,CAACM,IAAD,CAAb,CACD,CAbD,CAeA,GAAMG,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,IAAI,CAAI,CAC3B,GAAMC,CAAAA,OAAO,8BACXjB,KAAK,CAALA,KADW,CAEXC,MAAM,CAANA,MAFW,EAGRe,IAHQ,MAIXE,UAAU,gBACRC,WAAW,CAAE,CADL,CAERC,QAAQ,CAAE,CAFF,CAGRC,GAAG,CAAE,CAHG,CAIRC,QAAQ,CAAE,CAJF,CAKRC,WAAW,CAAE,CALL,CAMRC,cAAc,CAAE,CANR,CAORC,QAAQ,CAAE,CAPF,EAQLT,IAAI,CAACE,UARA,CAJC,EAAb,CAgBAxB,MAAM,CAAG,2BAAc,QAAd,CAAwBuB,OAAxB,CAAT,CACAvB,MAAM,CAACgC,EAAP,CAAU,OAAV,CAAmBxB,OAAnB,EACAR,MAAM,CAACgC,EAAP,CAAU,OAAV,CAAmBrB,OAAnB,EACAX,MAAM,CAACgC,EAAP,CAAU,aAAV,CAAyBf,cAAzB,EACAjB,MAAM,CAACgC,EAAP,CAAU,oBAAV,CAAgCnB,oBAAhC,EACAb,MAAM,CAACgC,EAAP,CAAU,uBAAV,CAAmClB,uBAAnC,EACA,GAAIQ,IAAI,CAACE,UAAL,EAAmBF,IAAI,CAACE,UAAL,CAAgBE,QAAvC,CAAiDO,SAAS,GAC3D,CAxBD,CA6BA,GAAMA,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACtBjC,MAAM,CAACiC,SAAP,GAAmBC,IAAnB,CAAwB,UAAM,CAAE,CAAhC,EACD,CAFD,CAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBnC,MAAM,CAACmC,UAAP,GAAoBD,IAApB,CAAyB,UAAM,CAAE,CAAjC,EACD,CAFD,CAGA,GAAME,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,CAAC,CAAI,CAClBrC,MAAM,CAACoC,MAAP,CAAcC,CAAd,EAAiBH,IAAjB,CAAsB,UAAM,CAAE,CAA9B,EACD,CAFD,CAIA,GAAMf,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,SACnBnB,CAAAA,MAAM,CAACsC,WAAP,GAAqBJ,IAArB,CAA0B,SAAAG,CAAC,CAAI,CAC7BpC,QAAQ,CAAGoC,CAAX,CACArB,eAAe,CAACqB,CAAD,CAAf,CACD,CAHD,CADmB,EAArB,CAOA,GAAMjB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5BmB,WAAW,CAAC,UAAM,CAChB,GAAI,CAACrC,QAAL,CAAeF,MAAM,CAACwC,cAAP,GAAwBN,IAAxB,CAA6B,SAAAG,CAAC,QAAItB,CAAAA,SAAS,CAACsB,CAAD,CAAb,EAA9B,EAChB,CAFU,CAER,GAFQ,CAAX,CAGD,CAJD,CAQA5B,iBAAOgC,MAAP,CAAc,cAAd,CAA8BpB,YAA9B,EACAZ,iBAAOgC,MAAP,CAAc,WAAd,CAA2BR,SAA3B,EACAxB,iBAAOgC,MAAP,CAAc,YAAd,CAA4BN,UAA5B,EACA1B,iBAAOgC,MAAP,CAAc,QAAd,CAAwBL,MAAxB","sourcesContent":["import YouTubePlayer from \"youtube-player\";\r\nimport invoke from \"react-native-webview-invoke/browser\";\r\n\r\nvar player;\r\nlet duration = 0;\r\nlet isPaused = false;\r\nconst { innerWidth, innerHeight } = window;\r\nlet width = \"100%\";\r\nlet height = \"100%\";\r\n\r\n// if (innerHeight > (innerWidth * 9) / 16) width = (innerHeight * 16) / 9;\r\n// else height = (innerWidth * 9) / 16;\r\n\r\n//listeners\r\n\r\nconst onReady = invoke.bind(\"onReady\");\r\nconst onError = invoke.bind(\"onError\");\r\nconst onStateChange = invoke.bind(\"onStateChange\");\r\nconst onPlaybackRateChange = invoke.bind(\"onPlaybackRateChange\");\r\nconst onPlaybackQualityChange = invoke.bind(\"onPlaybackQualityChange\");\r\nconst onPlaying = invoke.bind(\"onPlaying\");\r\nconst onDurationReady = invoke.bind(\"onDurationReady\");\r\n\r\nconst _onStateChange = ({ data }) => {\r\n  // in case first time playing ,\r\n  // we need to send Duration\r\n  // and start Interval to sent current Time and\r\n  if (data === 1 && duration === 0) {\r\n    _setDuration();\r\n    _setCurrentTime();\r\n  }\r\n  // we need to stop interval in case player state !== playing and activate it on playing mode\r\n  if (data !== 1) isPaused = true;\r\n  else isPaused = false;\r\n\r\n  onStateChange(data);\r\n};\r\n\r\nconst createPlayer = opts => {\r\n  const options = {\r\n    width,\r\n    height,\r\n    ...opts,\r\n    playerVars: {\r\n      enablejsapi: 1,\r\n      autoplay: 0,\r\n      rel: 0,\r\n      controls: 0,\r\n      playsinline: 1,\r\n      modestbranding: 1,\r\n      showinfo: 0,\r\n      ...opts.playerVars\r\n    }\r\n  };\r\n\r\n  player = YouTubePlayer(\"player\", options);\r\n  player.on(\"ready\", onReady);\r\n  player.on(\"error\", onError);\r\n  player.on(\"stateChange\", _onStateChange);\r\n  player.on(\"playbackRateChange\", onPlaybackRateChange);\r\n  player.on(\"playbackQualityChange\", onPlaybackQualityChange);\r\n  if (opts.playerVars && opts.playerVars.autoplay) playVideo();\r\n};\r\n\r\n//createPlayer({ videoId: \"Z1LmpiIGYNs\" });\r\n\r\n// actions\r\nconst playVideo = () => {\r\n  player.playVideo().then(() => {});\r\n};\r\nconst pauseVideo = () => {\r\n  player.pauseVideo().then(() => {});\r\n};\r\nconst seekTo = s => {\r\n  player.seekTo(s).then(() => {});\r\n};\r\n\r\nconst _setDuration = () =>\r\n  player.getDuration().then(s => {\r\n    duration = s;\r\n    onDurationReady(s);\r\n  });\r\n\r\n// send current time every 1000 ms\r\nconst _setCurrentTime = () => {\r\n  setInterval(() => {\r\n    if (!isPaused) player.getCurrentTime().then(s => onPlaying(s));\r\n  }, 500);\r\n};\r\n\r\n// invoke functions\r\n\r\ninvoke.define(\"createPlayer\", createPlayer);\r\ninvoke.define(\"playVideo\", playVideo);\r\ninvoke.define(\"pauseVideo\", pauseVideo);\r\ninvoke.define(\"seekTo\", seekTo);\r\n"]}